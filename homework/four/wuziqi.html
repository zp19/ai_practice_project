# 五子棋游戏实现

我将设计一个完整的五子棋游戏，包含棋盘、游戏逻辑、胜负判断和游戏状态显示。这个游戏将使用纯HTML/CSS/JavaScript实现，无需任何外部库。

## 设计思路
1. 创建一个15×15的标准五子棋棋盘
2. 实现黑白棋子轮流落子功能
3. 实现胜负判断逻辑（横、竖、斜向五子连珠）
4. 添加游戏状态显示、重新开始和悔棋功能
5. 设计简洁美观的界面

下面是完整的实现代码：

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>五子棋游戏</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 20px;
            color: #333;
        }
        
        .header {
            text-align: center;
            margin-bottom: 20px;
            width: 100%;
            max-width: 800px;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.8rem;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }
        
        .game-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            max-width: 1200px;
            width: 100%;
        }
        
        .board-container {
            position: relative;
            background-color: #deb887;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            padding: 20px;
        }
        
        .board {
            display: grid;
            grid-template-columns: repeat(15, 1fr);
            grid-template-rows: repeat(15, 1fr);
            width: 560px;
            height: 560px;
            background-color: #e0a95c;
            border: 2px solid #8b4513;
            position: relative;
        }
        
        /* 棋盘线 */
        .board::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(to right, #000 1px, transparent 1px),
                linear-gradient(to bottom, #000 1px, transparent 1px);
            background-size: calc(100% / 15) calc(100% / 15);
            opacity: 0.7;
            pointer-events: none;
        }
        
        /* 棋盘上的星位点 */
        .board::after {
            content: '';
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #000;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .cell {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 1;
        }
        
        .cell:hover::after {
            content: '';
            position: absolute;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background-color: rgba(0, 0, 0, 0.1);
            z-index: -1;
        }
        
        .stone {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            position: absolute;
            z-index: 2;
            box-shadow: 1px 2px 5px rgba(0, 0, 0, 0.3);
            transition: transform 0.2s;
        }
        
        .stone:hover {
            transform: scale(1.05);
        }
        
        .black {
            background: radial-gradient(circle at 10px 10px, #555, #000);
        }
        
        .white {
            background: radial-gradient(circle at 10px 10px, #fff, #ccc);
        }
        
        .last-move {
            box-shadow: 0 0 0 3px rgba(255, 0, 0, 0.6);
        }
        
        .info-panel {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            width: 320px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
        }
        
        .game-status {
            margin-bottom: 25px;
            text-align: center;
        }
        
        .status-title {
            font-size: 1.3rem;
            color: #7f8c8d;
            margin-bottom: 10px;
        }
        
        .status-text {
            font-size: 1.8rem;
            font-weight: bold;
            color: #2c3e50;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            border-radius: 8px;
            background-color: #f8f9fa;
        }
        
        .current-player {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 25px;
        }
        
        .player-indicator {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            margin-right: 15px;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.2);
        }
        
        .player-text {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }
        
        button {
            padding: 14px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .restart-btn {
            background-color: #3498db;
            color: white;
        }
        
        .restart-btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }
        
        .undo-btn {
            background-color: #f1c40f;
            color: #333;
        }
        
        .undo-btn:hover {
            background-color: #f39c12;
            transform: translateY(-2px);
        }
        
        .rules {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px dashed #ddd;
            color: #7f8c8d;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        .rules h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .footer {
            margin-top: 30px;
            text-align: center;
            color: #7f8c8d;
            font-size: 0.9rem;
            width: 100%;
            max-width: 800px;
        }
        
        /* 响应式设计 */
        @media (max-width: 1100px) {
            .game-container {
                flex-direction: column;
                align-items: center;
            }
            
            .info-panel {
                width: 560px;
            }
        }
        
        @media (max-width: 600px) {
            .board {
                width: 400px;
                height: 400px;
            }
            
            .stone {
                width: 22px;
                height: 22px;
            }
            
            .board-container, .info-panel {
                width: 400px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
        }
        
        @media (max-width: 450px) {
            .board {
                width: 320px;
                height: 320px;
            }
            
            .board-container, .info-panel {
                width: 320px;
            }
            
            .stone {
                width: 18px;
                height: 18px;
            }
        }
        
        .winning-line {
            position: absolute;
            background-color: rgba(255, 0, 0, 0.7);
            z-index: 3;
            transform-origin: 0 0;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>五子棋游戏</h1>
        <p class="subtitle">黑方与白方轮流落子，先形成五子连珠的一方获胜</p>
    </div>
    
    <div class="game-container">
        <div class="board-container">
            <div class="board" id="board">
                <!-- 棋盘单元格将通过JavaScript生成 -->
            </div>
        </div>
        
        <div class="info-panel">
            <div class="game-status">
                <div class="status-title">游戏状态</div>
                <div class="status-text" id="status-text">黑方回合</div>
            </div>
            
            <div class="current-player">
                <div class="player-indicator black" id="current-player-indicator"></div>
                <div class="player-text" id="current-player-text">黑方回合</div>
            </div>
            
            <div class="controls">
                <button class="restart-btn" id="restart-btn">
                    <span>重新开始游戏</span>
                </button>
                <button class="undo-btn" id="undo-btn">
                    <span>悔棋（上一步）</span>
                </button>
            </div>
            
            <div class="rules">
                <h3>游戏规则</h3>
                <p>1. 黑方先行，双方轮流在棋盘上放置自己的棋子</p>
                <p>2. 先在横、竖或斜向连成五子的一方获胜</p>
                <p>3. 棋盘大小为15×15，棋子落在交叉点上</p>
                <p>4. 棋子落在棋盘上后不能移动</p>
            </div>
        </div>
    </div>
    
    <div class="footer">
        <p>五子棋游戏 - 使用纯HTML/CSS/JavaScript实现 | 点击棋盘交叉点放置棋子</p>
    </div>

    <script>
        // 游戏状态和变量
        const boardSize = 15;
        let board = []; // 棋盘状态，0=空，1=黑棋，2=白棋
        let currentPlayer = 1; // 当前玩家，1=黑棋，2=白棋
        let gameOver = false;
        let moveHistory = []; // 落子历史，用于悔棋
        let winningLine = null; // 获胜连线
        
        // DOM元素
        const boardElement = document.getElementById('board');
        const statusText = document.getElementById('status-text');
        const currentPlayerIndicator = document.getElementById('current-player-indicator');
        const currentPlayerText = document.getElementById('current-player-text');
        const restartBtn = document.getElementById('restart-btn');
        const undoBtn = document.getElementById('undo-btn');
        
        // 初始化游戏
        function initGame() {
            // 初始化棋盘状态
            board = Array(boardSize).fill().map(() => Array(boardSize).fill(0));
            
            // 清空棋盘UI
            boardElement.innerHTML = '';
            
            // 清空历史记录
            moveHistory = [];
            gameOver = false;
            currentPlayer = 1;
            winningLine = null;
            
            // 移除之前的获胜连线
            document.querySelectorAll('.winning-line').forEach(el => el.remove());
            
            // 创建棋盘单元格
            for (let row = 0; row < boardSize; row++) {
                for (let col = 0; col < boardSize; col++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.dataset.row = row;
                    cell.dataset.col = col;
                    
                    // 添加星位点标记（棋盘上的五个点）
                    if (
                        (row === 3 && col === 3) || 
                        (row === 3 && col === 11) || 
                        (row === 7 && col === 7) || 
                        (row === 11 && col === 3) || 
                        (row === 11 && col === 11)
                    ) {
                        const star = document.createElement('div');
                        star.style.position = 'absolute';
                        star.style.width = '6px';
                        star.style.height = '6px';
                        star.style.backgroundColor = '#000';
                        star.style.borderRadius = '50%';
                        star.style.zIndex = '1';
                        cell.appendChild(star);
                    }
                    
                    cell.addEventListener('click', () => handleCellClick(row, col));
                    boardElement.appendChild(cell);
                }
            }
            
            updateGameStatus();
        }
        
        // 处理单元格点击
        function handleCellClick(row, col) {
            if (gameOver || board[row][col] !== 0) return;
            
            // 保存当前状态到历史记录（用于悔棋）
            moveHistory.push({
                row,
                col,
                player: currentPlayer,
                boardState: JSON.parse(JSON.stringify(board))
            });
            
            // 放置棋子
            placeStone(row, col, currentPlayer);
            
            // 检查是否获胜
            if (checkWin(row, col, currentPlayer)) {
                gameOver = true;
                statusText.textContent = currentPlayer === 1 ? '黑方获胜！' : '白方获胜！';
                statusText.style.color = currentPlayer === 1 ? '#2c3e50' : '#7f8c8d';
                currentPlayerText.textContent = '游戏结束';
            } else {
                // 切换玩家
                currentPlayer = currentPlayer === 1 ? 2 : 1;
                updateGameStatus();
            }
        }
        
        // 放置棋子
        function placeStone(row, col, player) {
            // 更新棋盘状态
            board[row][col] = player;
            
            // 创建棋子元素
            const stone = document.createElement('div');
            stone.className = `stone ${player === 1 ? 'black' : 'white'}`;
            
            // 移除上一个棋子的last-move标记
            document.querySelectorAll('.last-move').forEach(el => {
                el.classList.remove('last-move');
            });
            
            // 为当前棋子添加last-move标记
            stone.classList.add('last-move');
            
            // 找到对应的单元格并添加棋子
            const cell = document.querySelector(`.cell[data-row="${row}"][data-col="${col}"]`);
            cell.appendChild(stone);
        }
        
        // 检查是否获胜
        function checkWin(row, col, player) {
            // 检查方向：水平、垂直、两个对角线
            const directions = [
                [0, 1],   // 水平向右
                [1, 0],   // 垂直向下
                [1, 1],   // 右下对角线
                [1, -1]   // 左下对角线
            ];
            
            for (const [dx, dy] of directions) {
                let count = 1; // 当前棋子本身
                
                // 向正方向检查
                for (let i = 1; i < 5; i++) {
                    const newRow = row + dx * i;
                    const newCol = col + dy * i;
                    
                    if (
                        newRow >= 0 && newRow < boardSize &&
                        newCol >= 0 && newCol < boardSize &&
                        board[newRow][newCol] === player
                    ) {
                        count++;
                    } else {
                        break;
                    }
                }
                
                // 向反方向检查
                for (let i = 1; i < 5; i++) {
                    const newRow = row - dx * i;
                    const newCol = col - dy * i;
                    
                    if (
                        newRow >= 0 && newRow < boardSize &&
                        newCol >= 0 && newCol < boardSize &&
                        board[newRow][newCol] === player
                    ) {
                        count++;
                    } else {
                        break;
                    }
                }
                
                // 如果有五子连珠，绘制获胜连线
                if (count >= 5) {
                    drawWinningLine(row, col, dx, dy, count);
                    return true;
                }
            }
            
            return false;
        }
        
        // 绘制获胜连线
        function drawWinningLine(row, col, dx, dy, count) {
            // 计算连线的起点和终点
            let startRow = row;
            let startCol = col;
            let endRow = row;
            let endCol = col;
            
            // 向正方向延伸
            for (let i = 1; i < 5; i++) {
                const newRow = row + dx * i;
                const newCol = col + dy * i;
                
                if (
                    newRow >= 0 && newRow < boardSize &&
                    newCol >= 0 && newCol < boardSize &&
                    board[newRow][newCol] === currentPlayer
                ) {
                    endRow = newRow;
                    endCol = newCol;
                } else {
                    break;
                }
            }
            
            // 向反方向延伸
            for (let i = 1; i < 5; i++) {
                const newRow = row - dx * i;
                const newCol = col - dy * i;
                
                if (
                    newRow >= 0 && newRow < boardSize &&
                    newCol >= 0 && newCol < boardSize &&
                    board[newRow][newCol] === currentPlayer
                ) {
                    startRow = newRow;
                    startCol = newCol;
                } else {
                    break;
                }
            }
            
            // 计算棋盘上的实际像素位置
            const cellSize = boardElement.clientWidth / boardSize;
            const startX = startCol * cellSize + cellSize / 2;
            const startY = startRow * cellSize + cellSize / 2;
            const endX = endCol * cellSize + cellSize / 2;
            const endY = endRow * cellSize + cellSize / 2;
            
            // 计算连线的长度和角度
            const length = Math.sqrt(Math.pow(endX - startX, 2) + Math.pow(endY - startY, 2));
            const angle = Math.atan2(endY - startY, endX - startX) * 180 / Math.PI;
            
            // 创建连线元素
            const line = document.createElement('div');
            line.className = 'winning-line';
            line.style.position = 'absolute';
            line.style.left = `${startX}px`;
            line.style.top = `${startY}px`;
            line.style.width = `${length}px`;
            line.style.height = '6px';
            line.style.transform = `rotate(${angle}deg)`;
            line.style.borderRadius = '3px';
            
            boardElement.appendChild(line);
        }
        
        // 更新游戏状态显示
        function updateGameStatus() {
            if (gameOver) return;
            
            if (currentPlayer === 1) {
                statusText.textContent = '黑方回合';
                currentPlayerText.textContent = '黑方回合';
                currentPlayerIndicator.className = 'player-indicator black';
                statusText.style.color = '#2c3e50';
            } else {
                statusText.textContent = '白方回合';
                currentPlayerText.textContent = '白方回合';
                currentPlayerIndicator.className = 'player-indicator white';
                statusText.style.color = '#7f8c8d';
            }
        }
        
        // 悔棋功能
        function undoMove() {
            if (gameOver || moveHistory.length === 0) return;
            
            // 获取上一步记录
            const lastMove = moveHistory.pop();
            
            // 恢复棋盘状态
            board = lastMove.boardState;
            
            // 切换回上一个玩家
            currentPlayer = lastMove.player;
            
            // 清空棋盘UI
            boardElement.innerHTML = '';
            
            // 重新绘制棋盘和棋子
            for (let row = 0; row < boardSize; row++) {
                for (let col = 0; col < boardSize; col++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.dataset.row = row;
                    cell.dataset.col = col;
                    
                    // 添加星位点标记
                    if (
                        (row === 3 && col === 3) || 
                        (row === 3 && col === 11) || 
                        (row === 7 && col === 7) || 
                        (row === 11 && col === 3) || 
                        (row === 11 && col === 11)
                    ) {
                        const star = document.createElement('div');
                        star.style.position = 'absolute';
                        star.style.width = '6px';
                        star.style.height = '6px';
                        star.style.backgroundColor = '#000';
                        star.style.borderRadius = '50%';
                        star.style.zIndex = '1';
                        cell.appendChild(star);
                    }
                    
                    cell.addEventListener('click', () => handleCellClick(row, col));
                    boardElement.appendChild(cell);
                    
                    // 如果有棋子，重新绘制
                    if (board[row][col] !== 0) {
                        placeStone(row, col, board[row][col]);
                    }
                }
            }
            
            // 移除获胜连线
            document.querySelectorAll('.winning-line').forEach(el => el.remove());
            
            // 更新游戏状态
            gameOver = false;
            winningLine = null;
            updateGameStatus();
        }
        
        // 事件监听
        restartBtn.addEventListener('click', initGame);
        undoBtn.addEventListener('click', undoMove);
        
        // 初始化游戏
        initGame();
    </script>
</body>
</html>
```

## 功能说明

1. **游戏功能**：
   - 15×15标准五子棋棋盘
   - 黑白棋子轮流落子
   - 自动判断胜负（横、竖、斜向五子连珠）
   - 高亮显示最后落子位置
   - 显示获胜连线

2. **操作功能**：
   - 点击棋盘交叉点放置棋子
   - 重新开始游戏按钮
   - 悔棋功能（可回到上一步）

3. **界面特点**：
   - 响应式设计，适应不同屏幕尺寸
   - 简洁美观的UI，带有木质棋盘质感
   - 清晰的游戏状态显示
   - 棋子有3D效果和阴影

4. **游戏规则**：
   - 黑方先行，双方轮流落子
   - 先形成五子连珠（横、竖或斜向）的一方获胜
   - 棋盘上有五个星位点标记

您可以直接将上面的代码复制到HTML文件中，用浏览器打开即可开始游戏！
